var BASEURL,ORIGIN=location.protocol+"//"+location.hostname;function initEmbeds(){null!=(BASEURL=getBaseUrl())&&null!=ORIGIN&&[].slice.call(document.querySelectorAll("div.fwp-embed")).forEach(function(e){void 0==e.dataset.id&&(e.dataset.id=getUuid(),createEmbed(e))})}function getBaseUrl(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(e[t].src.indexOf("footballwebpages.co.uk")>=0&&e[t].src.indexOf("/embed.js")>=0)return e[t].src.substring(0,e[t].src.indexOf("/embed.js")+1);return null}function getUuid(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}function createEmbed(e,t){var n=[].filter.call(e.attributes,function(e){return/^data-/.test(e.name)}),a=BASEURL+"embed/",i="";n.forEach(function(e){"data-url"==e.name?a+=e.value:i+=e.name.substring(5)+"="+encodeURIComponent(e.value)+"&"});var r=document.createElement("iframe");r.id="fwp-"+e.getAttribute("data-id"),r.src=a+"?"+i+"origin="+encodeURIComponent(ORIGIN)+"&width="+e.offsetWidth,void 0==t&&(r.style.background="#418a41 url('"+BASEURL+"graphics/embed-loading.png') center no-repeat",r.style.backgroundSize="contain",r.style.minHeight="320px"),r.style.border="none",r.style.display="block",r.width="100%",e.appendChild(r),window.addEventListener("message",receiveMessage,!1)}function receiveMessage(e){if(BASEURL.startsWith(e.origin)){var t=e.data.split("/"),n=document.getElementById("fwp-"+t[1]);if(null!=n){if("change-date"==t[0]||"change-page"==t[0]){var a=n.parentNode;a.innerHTML="","change-date"==t[0]?a.setAttribute("data-date",t[2]):a.setAttribute("data-page",t[2]),createEmbed(a,!0)}else"loaded"==t[0]&&(n.style.background="none",n.style.minHeight="0",n.style.height=t[2])}}}document.addEventListener("DOMContentLoaded",function(){initEmbeds()});